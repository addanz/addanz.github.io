<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Community Posts</title>

    <!-- CSS Section -->
    <link rel="stylesheet" href="./Content/style.css">
    <link rel="stylesheet" href="./node_modules/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="./node_modules/@fortawesome/fontawesome-free/css/all.css">
    <style>
        .post-card {
            margin-top: 10px;
            padding: 10px;
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 5px;
        }
    </style>

</head>
<body>
<header></header>

<section id="posts-user-text">
    <h1>COMMUNITY POSTS!</h1>
    <p>This page is a community wide page that allows everyone to view posts
        shared <br>by fellow members of the community and allows the public to add more
        posts as well. </p>
</section>

<div class="container py-5">

    <div class="mb-3">
        <h2>Create Post</h2>
        <p>Please enter your name before your post if you wish to have it public.</p>
        <textarea id="postContent" class="form-control" placeholder="Write something..."></textarea>
        <button onclick="createPost()" class="btn btn-primary mt-2">Post</button>
    </div>

    <div id="postsContainer">
        <h2>Posts</h2>
        <!-- Hard-coded posts -->
        <div class="post-card">
            <p class="mb-1"> BBQ happening in Whiby Community Centre on April the 27th @ 4:00 PM!!</p>
            <div>
                <button onclick="editPost(this)" class="btn btn-primary btn-sm me-1"><i class="fas fa-edit"></i></button>
                <button onclick="deletePost(this)" class="btn btn-danger btn-sm"><i class="fas fa-trash-alt"></i></button>
            </div>
        </div>
        <div class="post-card">
            <p class="mb-1"> Rojauhn - Charity event hosted by the Noble Family thus sunday at 3:00 PM.</p>
            <div>
                <button onclick="editPost(this)" class="btn btn-primary btn-sm me-1"><i class="fas fa-edit"></i></button>
                <button onclick="deletePost(this)" class="btn btn-danger btn-sm"><i class="fas fa-trash-alt"></i></button>
            </div>
        </div>
    </div>
</div>

<script>
    // Function to create a new post
    function createPost() {
        var content = document.getElementById('postContent').value;
        if (content) {
            var currentDate = new Date().toLocaleString(); // Get the current date and time

            // Create elements
            var postDiv = document.createElement('div');
            postDiv.className = 'post-card';

            var postParagraph = document.createElement('p');
            postParagraph.className = 'mb-1';
            postParagraph.textContent = content; // Include date before content

            var editButton = document.createElement('button');
            editButton.className = 'btn btn-primary btn-sm me-1';
            editButton.innerHTML = '<i class="fas fa-edit"></i>';
            editButton.onclick = function() {
                editPost(postParagraph);
            };

            var deleteButton = document.createElement('button');
            deleteButton.className = 'btn btn-danger btn-sm';
            deleteButton.innerHTML = '<i class="fas fa-trash-alt"></i>';
            deleteButton.onclick = function() {
                deletePost(postDiv);
            };

            // Append elements to the post div
            postDiv.appendChild(postParagraph);
            postDiv.appendChild(editButton);
            postDiv.appendChild(deleteButton);

            // Append the post div to the posts container
            document.getElementById('postsContainer').appendChild(postDiv);

            // Clear the textarea
            document.getElementById('postContent').value = '';
        } else {
            alert('Please enter some text to post!');
        }
    }

    // Function to edit a post
    function editPost(postParagraph) {
        var newContent = prompt('Enter the new content:');
        if (newContent) {
            postParagraph.textContent = newContent;
        }
    }

    // Function to delete a post
    function deletePost(postDiv) {
        if (confirm('Are you sure you want to delete this post?')) {
            postDiv.remove();
        }
    }
</script>
<footer class="bg-dark text-white mt-5 fixed-bottom"></footer>

<!-- Scripting Section -->
<script src="./Script/main.js"></script>
<script src="./node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
<script src="./node_modules/jquery/dist/jquery.min.js"></script>

</body>
</html>
